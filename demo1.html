<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Agrigate Portal - Consumption Entry</title>

        <!-- Bootstrap CSS (Latest) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Font Awesome for icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

        <style>
            :root {
                --primary-color: #2e7d32;
                --secondary-color: #4caf50;
                --light-green: #e8f5e9;
                --dark-green: #1b5e20;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background-color: #f5f9f5;
            }

            .header-wrapper {
                background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
                color: white;
                padding: 15px 0;
                border-radius: 0 0 10px 10px;
                box-shadow: 0 4px 12px rgba(46, 125, 50, 0.2);
            }

            .title {
                font-weight: 700;
                letter-spacing: 1px;
            }

            .login-card,
            .main-card {
                border-radius: 15px;
                box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
                border: none;
                overflow: hidden;
            }

            .login-header {
                background-color: var(--primary-color);
                color: white;
                padding: 20px;
                text-align: center;
            }

            .main-header {
                background-color: var(--primary-color);
                color: white;
                padding: 15px 20px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .farm-card {
                border-left: 5px solid var(--primary-color);
                transition: all 0.3s;
                cursor: pointer;
            }

            .farm-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
            }

            .btn-agri {
                background-color: var(--primary-color);
                color: white;
                padding: 10px 25px;
                border-radius: 8px;
                font-weight: 600;
                border: none;
            }

            .btn-agri:hover {
                background-color: var(--dark-green);
                color: white;
            }

            .form-section {
                background-color: white;
                border-radius: 10px;
                padding: 25px;
                margin-bottom: 25px;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            }

            .section-title {
                color: var(--primary-color);
                border-bottom: 2px solid var(--light-green);
                padding-bottom: 10px;
                margin-bottom: 20px;
                font-weight: 600;
            }

            .info-box {
                background-color: var(--light-green);
                border-radius: 8px;
                padding: 15px;
                margin-bottom: 15px;
            }

            .info-label {
                font-weight: 600;
                color: var(--dark-green);
            }

            .info-value {
                font-weight: 500;
                color: #333;
            }

            .feed-item {
                border: 1px solid #e0e0e0;
                border-radius: 8px;
                padding: 15px;
                margin-bottom: 15px;
                background-color: #fafafa;
            }

            .active-farm {
                background-color: var(--light-green) !important;
                border-color: var(--primary-color) !important;
            }

            .image-preview {
                border: 2px dashed #ccc;
                border-radius: 8px;
                min-height: 120px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                background-color: #f9f9f9;
            }

            .image-preview:hover {
                border-color: var(--primary-color);
                background-color: #f0f0f0;
            }

            .status-badge {
                padding: 5px 10px;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
            }

            .status-active {
                background-color: #e8f5e9;
                color: var(--primary-color);
            }

            .status-inactive {
                background-color: #ffebee;
                color: #c62828;
            }

            .km-input-group {
                background-color: #f5f5f5;
                padding: 15px;
                border-radius: 8px;
            }

            footer {
                background-color: #333;
                color: white;
                padding: 20px 0;
                margin-top: 40px;
            }

            .required::after {
                content: " *";
                color: #d32f2f;
            }

            .login-container {
                min-height: 80vh;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .nav-tabs .nav-link.active {
                background-color: var(--primary-color);
                color: white;
                border-color: var(--primary-color);
            }

            .nav-tabs .nav-link {
                color: var(--primary-color);
            }

            @media (max-width: 768px) {
                .main-header {
                    flex-direction: column;
                    align-items: flex-start;
                }

                .header-actions {
                    margin-top: 10px;
                    width: 100%;
                }
            }
        </style>
    </head>

    <body class="d-flex flex-column min-vh-100">

        <!-- Login Screen (Initial View) -->
        <div id="loginScreen">
            <header>
                <div class="container">
                    <div class="header-wrapper">
                        <h1 class="text-center title fs-2">Agrigate Portal - Consumption Entry</h1>
                    </div>
                </div>
            </header>

            <main>
                <div class="container login-container">
                    <div class="col-md-6 col-lg-5">
                        <div class="login-card">
                            <div class="login-header">
                                <h3 class="mb-0"><i class="fas fa-user-circle me-2"></i>Portal Login</h3>
                                <p class="mb-0 mt-2">Line Supervisor & Accountant Access</p>
                            </div>
                            <div class="card-body p-4">
                                <div class="mb-3">
                                    <label for="userRole" class="form-label required">Select User Role</label>
                                    <select class="form-select" id="userRole">
                                        <option value="">-- Select Role --</option>
                                        <option value="line_supervisor">Line Supervisor</option>
                                        <option value="accountant">Accountant</option>
                                    </select>
                                </div>

                                <div class="mb-3">
                                    <label for="username" class="form-label required">Username</label>
                                    <input type="text" class="form-control" id="username"
                                        placeholder="Enter your username">
                                </div>

                                <div class="mb-4">
                                    <label for="password" class="form-label required">Password</label>
                                    <input type="password" class="form-control" id="password"
                                        placeholder="Enter your password">
                                </div>

                                <div class="d-grid">
                                    <button class="btn btn-agri" id="loginBtn">
                                        <i class="fas fa-sign-in-alt me-2"></i>Login to Portal
                                    </button>
                                </div>

                                <div class="mt-3 text-center">
                                    <p class="text-muted small">
                                        <i class="fas fa-info-circle me-1"></i>
                                        This portal is designed for Daily Consumption entry (DOC-Mortality &
                                        Feed-Consumption)
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Main Portal (Hidden Initially) -->
        <div id="mainPortal" style="display: none;">
            <header>
                <div class="container">
                    <div class="header-wrapper">
                        <div class="d-flex justify-content-between align-items-center">
                            <h1 class="title fs-2">Agrigate Portal</h1>
                            <div class="d-flex align-items-center">
                                <span class="me-3" id="userInfo">Logged in as: <strong>John Doe (Line
                                        Supervisor)</strong></span>
                                <button class="btn btn-sm btn-light" id="logoutBtn">
                                    <i class="fas fa-sign-out-alt me-1"></i>Logout
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <main class="flex-grow-1 py-4">
                <div class="container">
                    <div class="main-card mb-4">
                        <div class="main-header">
                            <h3 class="mb-0"><i class="fas fa-tachometer-alt me-2"></i>Daily Consumption Entry Portal
                            </h3>
                            <div class="header-actions">
                                <span class="status-badge status-active me-3">
                                    <i class="fas fa-map-marker-alt me-1"></i>Location: <span
                                        id="currentLocation">Inside Farm</span>
                                </span>
                                <span class="status-badge status-active">
                                    <i class="fas fa-calendar-day me-1"></i>Date: <span
                                        id="currentDate">2023-10-05</span>
                                </span>
                            </div>
                        </div>

                        <div class="card-body p-4">
                            <!-- Line Selection Section -->
                            <div class="form-section">
                                <h4 class="section-title"><i class="fas fa-map me-2"></i>Assigned Line & Farm Selection
                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label required">Select Line</label>
                                            <select class="form-select" id="lineSelect">
                                                <option value="line_a">Line A (Assigned)</option>
                                                <option value="line_b">Line B</option>
                                                <option value="line_c">Line C</option>
                                            </select>
                                            <div class="form-text">Showing only assigned line by default</div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Active Farms/Batches</label>
                                        <div class="row" id="farmList">
                                            <!-- Farms will be loaded here dynamically -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Selected Farm Details -->
                            <div class="form-section" id="farmDetailsSection" style="display: none;">
                                <h4 class="section-title"><i class="fas fa-warehouse me-2"></i>Selected Farm Details
                                </h4>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="info-box">
                                            <div class="row">
                                                <div class="col-6 info-label">Farm Name:</div>
                                                <div class="col-6 info-value" id="selectedFarmName">Farm A-12</div>
                                            </div>
                                            <div class="row mt-2">
                                                <div class="col-6 info-label">Batch ID:</div>
                                                <div class="col-6 info-value" id="selectedBatchId">B-2023-09-15</div>
                                            </div>
                                            <div class="row mt-2">
                                                <div class="col-6 info-label">Start Date:</div>
                                                <div class="col-6 info-value" id="selectedStartDate">2023-09-15</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="info-box">
                                            <div class="row">
                                                <div class="col-6 info-label">Location Entry:</div>
                                                <div class="col-6">
                                                    <div class="btn-group w-100" role="group">
                                                        <input type="radio" class="btn-check" name="locationType"
                                                            id="insideFarm" autocomplete="off" checked>
                                                        <label class="btn btn-outline-success" for="insideFarm">Inside
                                                            Farm</label>

                                                        <input type="radio" class="btn-check" name="locationType"
                                                            id="outsideFarm" autocomplete="off">
                                                        <label class="btn btn-outline-success" for="outsideFarm">Outside
                                                            Farm</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <div class="col-6 info-label">Bike KM Entry:</div>
                                                <div class="col-6">
                                                    <div class="km-input-group">
                                                        <div class="row g-2">
                                                            <div class="col-6">
                                                                <label class="form-label small">Starting KM</label>
                                                                <input type="number"
                                                                    class="form-control form-control-sm" id="startKm"
                                                                    placeholder="0">
                                                            </div>
                                                            <div class="col-6">
                                                                <label class="form-label small">Closing KM</label>
                                                                <input type="number"
                                                                    class="form-control form-control-sm" id="closeKm"
                                                                    placeholder="0">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Mortality Consumption Entry -->
                            <div class="form-section" id="mortalitySection" style="display: none;">
                                <h4 class="section-title"><i class="fas fa-dove me-2"></i>Mortality Day-Consumption
                                    Entry</h4>

                                <div class="row mb-4">
                                    <div class="col-md-3">
                                        <div class="info-box">
                                            <div class="info-label">Received Birds</div>
                                            <div class="info-value fs-5" id="receivedBirds">1000 pcs</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="info-box">
                                            <div class="info-label">Birds Age</div>
                                            <div class="info-value fs-5" id="birdsAge">12 days</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="info-box">
                                            <div class="info-label">Mortality Stock</div>
                                            <div class="info-value fs-5" id="mortalityStock">5 pcs</div>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="info-box">
                                            <div class="info-label">Current Stock</div>
                                            <div class="info-value fs-5" id="currentStock">995 pcs</div>
                                        </div>
                                    </div>
                                </div>

                                <h5 class="mb-3 text-success"><i class="fas fa-edit me-2"></i>Mortality Entry</h5>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="mortalityEntry" class="form-label required">Mortality Entry
                                                (pcs)</label>
                                            <input type="number" class="form-control" id="mortalityEntry" min="0"
                                                max="50" value="0">
                                            <div class="form-text">Enter today's mortality count</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label for="mortalityReason" class="form-label required">Reason</label>
                                            <select class="form-select" id="mortalityReason">
                                                <option value="">-- Select Reason --</option>
                                                <option value="natural">Natural Death</option>
                                                <option value="disease">Disease</option>
                                                <option value="accident">Accident</option>
                                                <option value="predator">Predator Attack</option>
                                                <option value="other">Other</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">Image Attachments (JPG)</label>
                                            <div class="image-preview" id="imagePreview" data-bs-toggle="modal"
                                                data-bs-target="#imageModal">
                                                <div class="text-center">
                                                    <i class="fas fa-cloud-upload-alt fa-2x text-muted mb-2"></i>
                                                    <p class="text-muted mb-0">Click to upload image</p>
                                                    <small class="text-muted">Max size: 5MB</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Previous entries (max 3 days) -->
                                <div class="mt-4">
                                    <h6 class="text-muted"><i class="fas fa-history me-1"></i>Previous 3 Days Entries
                                        (Read Only)</h6>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-bordered">
                                            <thead class="table-light">
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Mortality Count</th>
                                                    <th>Reason</th>
                                                    <th>Entry By</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>2023-10-04</td>
                                                    <td>3 pcs</td>
                                                    <td>Natural Death</td>
                                                    <td>John Doe</td>
                                                </tr>
                                                <tr>
                                                    <td>2023-10-03</td>
                                                    <td>4 pcs</td>
                                                    <td>Disease</td>
                                                    <td>John Doe</td>
                                                </tr>
                                                <tr>
                                                    <td>2023-10-02</td>
                                                    <td>2 pcs</td>
                                                    <td>Accident</td>
                                                    <td>John Doe</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <!-- Feed Consumption Entry -->
                            <div class="form-section" id="feedSection" style="display: none;">
                                <h4 class="section-title"><i class="fas fa-seedling me-2"></i>Feed Day-Consumption Entry
                                </h4>

                                <div class="row mb-4">
                                    <div class="col-md-4">
                                        <div class="info-box">
                                            <div class="info-label">Received Stock</div>
                                            <div class="info-value">
                                                <div>S: 300 kg</div>
                                                <div>G: 300 kg</div>
                                                <div>F: 400 kg</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="info-box">
                                            <div class="info-label">Consumption Stock</div>
                                            <div class="info-value">
                                                <div>S: 100 kg</div>
                                                <div>G: 50 kg</div>
                                                <div>F: 90 kg</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="info-box">
                                            <div class="info-label">Current Stock</div>
                                            <div class="info-value">
                                                <div>S: 200 kg</div>
                                                <div>G: 250 kg</div>
                                                <div>F: 310 kg</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <h5 class="mb-3 text-success"><i class="fas fa-edit me-2"></i>Feed Entry</h5>
                                <p class="text-muted mb-3">Showing stock item-wise: 1. Starter, 2. Grower, 3. Finisher
                                </p>

                                <!-- Starter Feed -->
                                <div class="feed-item">
                                    <div class="row align-items-center">
                                        <div class="col-md-3">
                                            <h6 class="mb-0"><i class="fas fa-1 me-2 text-primary"></i>Starter Feed</h6>
                                            <small class="text-muted">Standard: 0.6kg per chick</small>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="info-box py-2">
                                                <div class="row">
                                                    <div class="col-6 info-label">Current Stock:</div>
                                                    <div class="col-6 info-value">200 kg</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="mb-0">
                                                <label class="form-label">Auto Suggested Qty</label>
                                                <input type="text" class="form-control" value="60 kg" readonly>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="mb-0">
                                                <label for="starterEntry" class="form-label required">Actual Entry
                                                    (kg)</label>
                                                <input type="number" class="form-control" id="starterEntry" min="0"
                                                    max="200" value="60">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Grower Feed -->
                                <div class="feed-item">
                                    <div class="row align-items-center">
                                        <div class="col-md-3">
                                            <h6 class="mb-0"><i class="fas fa-2 me-2 text-primary"></i>Grower Feed</h6>
                                            <small class="text-muted">Standard: 1.5kg per chick</small>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="info-box py-2">
                                                <div class="row">
                                                    <div class="col-6 info-label">Current Stock:</div>
                                                    <div class="col-6 info-value">250 kg</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="mb-0">
                                                <label class="form-label">Auto Suggested Qty</label>
                                                <input type="text" class="form-control" value="150 kg" readonly>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="mb-0">
                                                <label for="growerEntry" class="form-label required">Actual Entry
                                                    (kg)</label>
                                                <input type="number" class="form-control" id="growerEntry" min="0"
                                                    max="250" value="150">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Finisher Feed -->
                                <div class="feed-item">
                                    <div class="row align-items-center">
                                        <div class="col-md-3">
                                            <h6 class="mb-0"><i class="fas fa-3 me-2 text-primary"></i>Finisher Feed
                                            </h6>
                                            <small class="text-muted">Standard: 1.1kg per chick</small>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="info-box py-2">
                                                <div class="row">
                                                    <div class="col-6 info-label">Current Stock:</div>
                                                    <div class="col-6 info-value">310 kg</div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="mb-0">
                                                <label class="form-label">Auto Suggested Qty</label>
                                                <input type="text" class="form-control" value="110 kg" readonly>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="mb-0">
                                                <label for="finisherEntry" class="form-label required">Actual Entry
                                                    (kg)</label>
                                                <input type="number" class="form-control" id="finisherEntry" min="0"
                                                    max="310" value="110">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="alert alert-info mt-3">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <h6><i class="fas fa-calculator me-2"></i>Bag Consumption Calculation</h6>
                                            <p class="mb-0">Total Feed Consumption: <span
                                                    id="totalFeedConsumption">320</span> kg = <span
                                                    id="bagConsumption">6.4</span> bags (50kg = 1 bag)</p>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="info-box py-2">
                                                <div class="row">
                                                    <div class="col-6 info-label">Total Bags:</div>
                                                    <div class="col-6 info-value">6.4 bags</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="d-flex justify-content-between mt-4" id="actionButtons" style="display: none;">
                                <button class="btn btn-outline-secondary" id="returnFormBtn">
                                    <i class="fas fa-undo me-2"></i>Return Form (Accountant Only)
                                </button>
                                <div>
                                    <button class="btn btn-secondary me-2" id="saveDraftBtn">
                                        <i class="fas fa-save me-2"></i>Save Draft
                                    </button>
                                    <button class="btn btn-agri" id="submitFormBtn">
                                        <i class="fas fa-paper-plane me-2"></i>Submit Consumption Entry
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <h5>Agrigate Portal</h5>
                        <p class="mb-0">Daily Consumption Entry System for Poultry Management</p>
                        <p class="small mt-2">Version 1.0 | Designed for Line Supervisors & Accountants</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <p class="mb-1"><i class="fas fa-info-circle me-2"></i>Features:</p>
                        <ul class="list-unstyled small">
                            <li><i class="fas fa-check-circle me-1 text-success"></i> Line-Supervisor & Accountant
                                Access</li>
                            <li><i class="fas fa-check-circle me-1 text-success"></i> Location-wise Entry
                                (Inside/Outside Farm)</li>
                            <li><i class="fas fa-check-circle me-1 text-success"></i> Bike-KM Tracking</li>
                            <li><i class="fas fa-check-circle me-1 text-success"></i> Auto Bag Consumption Calculation
                            </li>
                        </ul>
                    </div>
                </div>
                <hr class="my-3 bg-light">
                <div class="text-center small">
                    &copy; 2023 Agrigate Portal. For demonstration purposes only.
                </div>
            </div>
        </footer>

        <!-- Image Upload Modal -->
        <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="imageModalLabel">Upload Mortality Image</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="imageUpload" class="form-label">Select JPG Image</label>
                            <input class="form-control" type="file" id="imageUpload" accept=".jpg,.jpeg">
                        </div>
                        <div class="text-center">
                            <p class="text-muted">Image will be attached to mortality record</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-agri" data-bs-dismiss="modal">Upload Image</button>
                    </div>
                </div>
            </div>
        </div>


        <main class="">
            <div class="container login-container" style="display: none;">
                <div class="login-card">
                    <div class="login-header">
                        <div class="login-icon">
                            <i class="fas fa-user-shield"></i>
                        </div>
                        <h3 class="mb-2">Portal Authentication</h3>
                        <p class="mb-0 opacity-75">Line Supervisor & Accountant Access Only</p>
                    </div>

                    <div class="card-body p-4 p-md-5">
                        <form action="#" method="post">
                            <div class="mb-4">
                                <label for="userRole" class="form-label required">User Role</label>
                                <select class="form-select" id="userRole" name="userRole" required>
                                    <option value="" selected disabled>-- Select Your Role --</option>
                                    <option value="line_supervisor">Line Supervisor</option>
                                    <option value="accountant">Accountant</option>
                                </select>
                                <div class="form-text">Access permissions vary by role</div>
                            </div>

                            <div class="mb-4">
                                <label for="username" class="form-label required">Username</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                                    <input type="text" class="form-control" id="username" name="username"
                                        placeholder="Enter your username" required>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label for="password" class="form-label required">Password</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-key"></i></span>
                                    <input type="password" class="form-control" id="password" name="password"
                                        placeholder="Enter your password" required>
                                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="progress mt-2">
                                    <div class="progress-bar" role="progressbar" style="width: 75%"></div>
                                </div>
                                <div class="form-text">Password strength: <span class="text-success">Strong</span>
                                </div>
                            </div>

                            <div class="mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="rememberMe">
                                    <label class="form-check-label" for="rememberMe">
                                        Remember me on this device
                                    </label>
                                </div>
                            </div>

                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-agri">
                                    <i class="fas fa-sign-in-alt me-2"></i>Login to Portal
                                </button>

                                <a href="#forgot-password" class="btn btn-outline-agri">
                                    <i class="fas fa-question-circle me-2"></i>Forgot Password?
                                </a>
                            </div>
                        </form>

                        <div class="mt-4 pt-3 border-top">
                            <div class="alert alert-agri">
                                <h6 class="alert-heading"><i class="fas fa-info-circle me-2"></i>Portal Information
                                </h6>
                                <p class="mb-2 small">This portal is designed for Daily-Consumption entry including
                                    DOC-Mortality and Feed-Consumption data.</p>
                                <p class="mb-0 small"><strong>Access:</strong> Line-Supervisor (entry) & Accountant
                                    (monitor)</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>


        <!-- Bootstrap JS Bundle (with Popper) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                // Set current date
                const today = new Date();
                const formattedDate = today.toISOString().split('T')[0];
                document.getElementById('currentDate').textContent = formattedDate;

                // Login functionality
                const loginBtn = document.getElementById('loginBtn');
                const loginScreen = document.getElementById('loginScreen');
                const mainPortal = document.getElementById('mainPortal');

                loginBtn.addEventListener('click', function () {
                    const userRole = document.getElementById('userRole').value;
                    const username = document.getElementById('username').value;
                    const password = document.getElementById('password').value;

                    if (!userRole || !username || !password) {
                        alert('Please fill in all required fields');
                        return;
                    }

                    // Simulate login - in real app, this would be an API call
                    loginScreen.style.display = 'none';
                    mainPortal.style.display = 'block';

                    // Update user info based on role
                    const userInfo = document.getElementById('userInfo');
                    if (userRole === 'line_supervisor') {
                        userInfo.innerHTML = 'Logged in as: <strong>' + username + ' (Line Supervisor)</strong>';
                        document.getElementById('returnFormBtn').style.display = 'none';
                    } else {
                        userInfo.innerHTML = 'Logged in as: <strong>' + username + ' (Accountant)</strong>';
                        document.getElementById('returnFormBtn').style.display = 'block';
                    }

                    // Load farm data
                    loadFarms();
                });

                // Logout functionality
                document.getElementById('logoutBtn').addEventListener('click', function () {
                    if (confirm('Are you sure you want to logout?')) {
                        mainPortal.style.display = 'none';
                        loginScreen.style.display = 'block';

                        // Reset form
                        document.getElementById('userRole').value = '';
                        document.getElementById('username').value = '';
                        document.getElementById('password').value = '';
                    }
                });

                // Farm data
                const farms = [
                    { id: 1, name: 'Farm A-12', batch: 'B-2023-09-15', startDate: '2023-09-15', birds: 1000, age: 12, status: 'active' },
                    { id: 2, name: 'Farm B-07', batch: 'B-2023-09-20', startDate: '2023-09-20', birds: 1500, age: 7, status: 'active' },
                    { id: 3, name: 'Farm C-03', batch: 'B-2023-10-01', startDate: '2023-10-01', birds: 1200, age: 4, status: 'active' },
                    { id: 4, name: 'Farm D-09', batch: 'B-2023-08-25', startDate: '2023-08-25', birds: 1800, age: 41, status: 'inactive' }
                ];

                // Load farm list
                function loadFarms() {
                    const farmList = document.getElementById('farmList');
                    farmList.innerHTML = '';

                    // Show only active farms
                    const activeFarms = farms.filter(farm => farm.status === 'active');

                    activeFarms.forEach(farm => {
                        const farmCol = document.createElement('div');
                        farmCol.className = 'col-md-6 mb-3';

                        farmCol.innerHTML = `
                        <div class="card farm-card" data-farm-id="${farm.id}">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h5 class="card-title mb-1">${farm.name}</h5>
                                        <p class="card-text small text-muted mb-1">Batch: ${farm.batch}</p>
                                        <p class="card-text small mb-0">
                                            <span class="badge bg-success me-2">${farm.birds} Birds</span>
                                            <span class="badge bg-info">Age: ${farm.age} days</span>
                                        </p>
                                    </div>
                                    <div>
                                        <span class="status-badge status-active">Active</span>
                                    </div>
                                </div>
                                <div class="text-end mt-2">
                                    <button class="btn btn-sm btn-agri select-farm-btn">Select Farm</button>
                                </div>
                            </div>
                        </div>
                    `;

                        farmList.appendChild(farmCol);
                    });

                    // Add event listeners to farm selection buttons
                    document.querySelectorAll('.select-farm-btn').forEach(button => {
                        button.addEventListener('click', function () {
                            const farmCard = this.closest('.farm-card');
                            const farmId = parseInt(farmCard.getAttribute('data-farm-id'));
                            selectFarm(farmId);
                        });
                    });
                }

                // Select farm function
                function selectFarm(farmId) {
                    const farm = farms.find(f => f.id === farmId);

                    if (!farm) return;

                    // Update UI with selected farm details
                    document.getElementById('selectedFarmName').textContent = farm.name;
                    document.getElementById('selectedBatchId').textContent = farm.batch;
                    document.getElementById('selectedStartDate').textContent = farm.startDate;
                    document.getElementById('receivedBirds').textContent = farm.birds + ' pcs';
                    document.getElementById('birdsAge').textContent = farm.age + ' days';

                    // Calculate current stock (birds - mortality)
                    const mortalityStock = 5; // From previous entries
                    const currentStock = farm.birds - mortalityStock;
                    document.getElementById('mortalityStock').textContent = mortalityStock + ' pcs';
                    document.getElementById('currentStock').textContent = currentStock + ' pcs';

                    // Show farm details section
                    document.getElementById('farmDetailsSection').style.display = 'block';
                    document.getElementById('mortalitySection').style.display = 'block';
                    document.getElementById('feedSection').style.display = 'block';
                    document.getElementById('actionButtons').style.display = 'flex';

                    // Highlight selected farm card
                    document.querySelectorAll('.farm-card').forEach(card => {
                        card.classList.remove('active-farm');
                    });

                    document.querySelector(`.farm-card[data-farm-id="${farmId}"]`).classList.add('active-farm');

                    // Update feed calculations based on bird count
                    updateFeedCalculations(farm.birds, farm.age);
                }

                // Update feed calculations
                function updateFeedCalculations(birdCount, age) {
                    // Calculate auto suggested quantities based on standards
                    let starterQty = 0, growerQty = 0, finisherQty = 0;

                    // Based on age, different feed types are used
                    if (age <= 14) {
                        // Starter phase: 0.6kg per bird for first 14 days
                        starterQty = Math.round(birdCount * 0.6 * (age / 14));
                    } else if (age <= 35) {
                        // Grower phase: 1.5kg per bird for days 15-35
                        starterQty = Math.round(bird